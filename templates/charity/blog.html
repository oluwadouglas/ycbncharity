{% extends 'charity/base.html' %}
{% load static %}

{% block title %}{{ page_title|default:"Articles - YCBN" }}{% endblock %}

{% block extra_css %}
<style>
  /* Keep blog images uniform and responsive */
  .th-blog .blog-img,
  .th-blog .blog-radius-img {
    aspect-ratio: 16/9;
    overflow: hidden;
    background: #f5f5f5;
    border-radius: 8px;
  }
  .th-blog .blog-img img,
  .th-blog .blog-radius-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
</style>
{% endblock %}

{% block content %}

<section class="th-blog-wrapper space-top space-extra-bottom">
        <div class="container">
            {% if is_member %}
            <div class="row mb-3">
                <div class="col-12 d-flex justify-content-end">
                    <a href="{% url 'charity:add_article' %}" class="th-btn">Add Article</a>
                </div>
            </div>
            {% endif %}
             <div class="row gx-40">
                 <div class="col-xxl-8 col-lg-7">
                     {% for post in posts %}
                     <div class="th-blog blog-single has-post-thumbnail">
                         {% if post.image %}
                         <div class="blog-img">
                             <a href="{% url 'charity:article_details' post.id %}"><img src="{{ post.image.url }}" alt="{{ post.title }}"></a>
                         </div>
                         {% endif %}
                         <div class="blog-content">
                             <div class="blog-meta">
                                 <a href="{% url 'charity:articles' %}"><i class="fas fa-calendar-days"></i>{{ post.date|date:"F d, Y" }}</a>
                                 <a class="author" href="{% url 'charity:articles' %}"><i class="fas fa-user"></i>{{ post.author }}</a>
                                {% if is_member %}
                                <a class="ms-2" href="{% url 'charity:edit_article' post.id %}"><i class="fas fa-pen"></i> Edit</a>
                                {% endif %}
                             </div>
                             <h2 class="blog-title"><a href="{% url 'charity:article_details' post.id %}">{{ post.title }}</a>
                             </h2>
                             <p class="blog-text">{{ post.details|truncatechars:220 }}</p>
                             <a href="{% url 'charity:article_details' post.id %}" class="th-btn btn-sm">Read More <i class="fas fa-arrow-up-right ms-2"></i></a>
                         </div>
                     </div>
                     {% empty %}
                     <p>No articles yet. Please add one from admin.</p>
                     {% endfor %}
                     <div class="th-pagination ">
                         <ul>
                             <li><span><i class="fas fa-arrow-left"></i></span></li>
                             <li><span>1</span></li>
                             <li><span><i class="fas fa-arrow-right"></i></span></li>
                         </ul>
                     </div>
                 </div>
                 <div class="col-xxl-4 col-lg-5">
                     <aside class="sidebar-area">
                         <div class="widget widget_search  ">
                             <form class="search-form">
                                 <input type="text" placeholder="Enter Keyword">
                                 <button type="submit"><i class="far fa-search"></i></button>
                             </form>
                         </div>
                         <!-- Removed static categories widget (no backend source) -->
                         <div class="widget  ">
                             <h3 class="widget_title">Recent Posts</h3>
                             <div class="recent-post-wrap">
                                 {% for post in posts|slice:":3" %}
                                 <div class="recent-post">
                                     <div class="media-img">
                                         <a href="{% url 'charity:blog_details' post.id %}">
                                             {% if post.image %}
                                             <img src="{{ post.image.url }}" alt="{{ post.title }}">
                                             {% else %}
                                             <img src="{% static 'assets/img/blog/recent-post-1-1.jpg' %}" alt="{{ post.title }}">
                                             {% endif %}
                                         </a>
                                     </div>
                                     <div class="media-body">
                                         <div class="recent-post-meta">
                                             <a href='{% url 'charity:blog' %}'><i class="fas fa-calendar-days"></i>{{ post.date|date:"d M, Y" }}</a>
                                         </div>
                                         <h4 class="post-title"><a class="text-inherit" href="{% url 'charity:blog_details' post.id %}">{{ post.title|truncatewords:8 }}</a></h4>
                                     </div>
                                 </div>
                                 {% empty %}
                                 <p class="text-muted">No recent posts.</p>
                                 {% endfor %}
                             </div>
                         </div>
                         <!-- Removed static tags widget (no backend source) -->
                     </aside>
                 </div>
             </div>
         </div>
     </section>



<!--==============================
Blog Area
============================== -->

{% endblock %}
