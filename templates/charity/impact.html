{% extends 'charity/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'assets/css/impact-styles.css' %}">
{% endblock %}

{% block content %}
<!-- Impact Statistics Section -->
<section class="space" id="impact-stats">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-xl-8 col-lg-10 col-md-12">
                <div class="title-area text-center">
                    <span class="sub-title">
                        <i class="fas fa-chart-line me-2"></i>
                        Our Numbers
                    </span>
                    <h2 class="sec-title">Impact by the Numbers</h2>
                    <p class="sec-text">Every number represents lives touched, communities strengthened, and hope restored through your generous support.</p>
                </div>
            </div>
        </div>
        
        {% if impact_counter %}
        <div class="row gy-4 justify-content-center" id="impact-counters">
            {% for counter in impact_counter %}
            <div class="col-xl-3 col-lg-4 col-md-6">
                <div class="counter-card animate-on-scroll animate-fade-up" data-color="{{ counter.display_color }}" style="--counter-color: {{ counter.display_color }};">
                    <div class="counter-card-icon">
                        {% if counter.counter_type == 'people' %}
                            <i class="fas fa-users" style="color: white; font-size: 2.8rem;"></i>
                        {% elif counter.counter_type == 'projects' %}
                            <i class="fas fa-project-diagram" style="color: white; font-size: 2.8rem;"></i>
                        {% elif counter.counter_type == 'schools' %}
                            <i class="fas fa-school" style="color: white; font-size: 2.8rem;"></i>
                        {% elif counter.counter_type == 'communities' %}
                            <i class="fas fa-home" style="color: white; font-size: 2.8rem;"></i>
                        {% elif counter.counter_type == 'volunteers' %}
                            <i class="fas fa-hands-helping" style="color: white; font-size: 2.8rem;"></i>
                        {% elif counter.counter_type == 'funds' %}
                            <i class="fas fa-donate" style="color: white; font-size: 2.8rem;"></i>
                        {% else %}
                            <i class="fas fa-heart" style="color: white; font-size: 2.8rem;"></i>
                        {% endif %}
                    </div>
                    <div class="counter-card-content">
                        <h3 class="counter-number" data-target="{{ counter.target_number }}" data-prefix="{{ counter.prefix }}" data-suffix="{{ counter.suffix }}">
                            {{ counter.prefix }}0{{ counter.suffix }}
                        </h3>
                        <p class="counter-title">{{ counter.title }}</p>
                        <div class="counter-type">{{ counter.get_counter_type_display }}</div>
                    </div>
                    <div class="counter-card-bg"></div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="row gy-4 justify-content-center">
            <div class="col-12 text-center">
                <div class="empty-state">
                    <i class="fas fa-chart-line fa-3x text-muted mb-3"></i>
                    <h4>Impact Metrics In Development</h4>
                    <p class="text-muted">We are currently compiling comprehensive impact data to showcase the meaningful difference your support creates in our communities.</p>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<!-- Impact Sections -->
{% if impact %}
{% for section in impact %}
<section class="space{% if forloop.counter0|divisibleby:2 %} bg-smoke{% endif %}" id="impact-section-{{ forloop.counter }}">
    <div class="container">
        <div class="row align-items-center {% if forloop.counter0|divisibleby:2 %}flex-row-reverse{% endif %}">
            <div class="col-xl-6 col-lg-6">
                <div class="impact-content">
                    <div class="title-area mb-35">
                        <span class="sub-title">
                            Impact Story #{{ forloop.counter }}
                        </span>
                        <h2 class="sec-title">{{ section.title }}</h2>
                        {% if section.subtitle %}
                        <h4 class="impact-subtitle">{{ section.subtitle }}</h4>
                        {% endif %}
                    </div>
                    <div class="impact-description">
                        {{ section.description|linebreaks }}
                    </div>
                    
                    <!-- Key Highlights -->
                    {% if section.highlight_1_number or section.highlight_2_number or section.highlight_3_number %}
                    <div class="impact-highlights mt-4">
                        <div class="row gy-3">
                            {% if section.highlight_1_number %}
                            <div class="col-12">
                                <div class="highlight-item animate-on-scroll animate-fade-up">
                                    <div class="highlight-number">{{ section.highlight_1_number }}</div>
                                    <div class="highlight-description">{{ section.highlight_1_description }}</div>
                                </div>
                            </div>
                            {% endif %}
                            {% if section.highlight_2_number %}
                            <div class="col-12">
                                <div class="highlight-item animate-on-scroll animate-fade-up" style="animation-delay: 0.2s;">
                                    <div class="highlight-number">{{ section.highlight_2_number }}</div>
                                    <div class="highlight-description">{{ section.highlight_2_description }}</div>
                                </div>
                            </div>
                            {% endif %}
                            {% if section.highlight_3_number %}
                            <div class="col-12">
                                <div class="highlight-item animate-on-scroll animate-fade-up" style="animation-delay: 0.4s;">
                                    <div class="highlight-number">{{ section.highlight_3_number }}</div>
                                    <div class="highlight-description">{{ section.highlight_3_description }}</div>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <div class="impact-actions mt-4">
                        <a href="{% url 'charity:donate_now' %}" class="th-btn">Support This Cause<i class="fas fa-heart ms-2"></i></a>
                        <a href="{% url 'charity:contact' %}" class="th-btn style3 ms-3">Learn More<i class="fas fa-arrow-right ms-2"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-xl-6 col-lg-6">
                <div class="impact-img">
                    {% if section.section_image %}
                    <img src="{{ section.section_image.url }}" alt="{{ section.title }}" class="w-100">
                    {% else %}
                    <div class="placeholder-img">
                        <i class="fas fa-image fa-3x text-muted"></i>
                        <p class="text-muted mt-2">Image coming soon</p>
                    </div>
                    {% endif %}
                    <div class="impact-shape">
                        <img src="{% static 'assets/img/shape/about_shape_1.png' %}" alt="shape">
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endfor %}
{% else %}
<section class="space">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-xl-8 col-lg-10">
                <div class="empty-state text-center">
                    <i class="fas fa-hands-helping fa-4x text-muted mb-4"></i>
                    <h3>Impact Stories Coming Soon</h3>
                    <p class="text-muted mb-4">We're working on showcasing the amazing impact your support creates. Check back soon to see the stories of transformation and hope.</p>
                    <div class="btn-group">
                        <a href="{% url 'charity:donate_now' %}" class="th-btn">Make an Impact<i class="fas fa-heart ms-2"></i></a>
                        <a href="{% url 'charity:contact' %}" class="th-btn style3 ms-3">Get Involved<i class="fas fa-users ms-2"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Call to Action Section -->
<section class="cta-area-1" data-bg-src="{% static 'assets/img/bg/cta_bg_1.jpg' %}">
    <div class="container">
        <div class="row align-items-center justify-content-between">
            <div class="col-lg-8">
                <div class="cta-wrap title-area mb-0">
                    <div class="cta-info">
                        <div class="cta-icon">
                            <img src="{% static 'assets/img/icon/cta_icon.svg' %}" alt="icon">
                        </div>
                        <div class="media-body">
                            <h6 class="cta-title">Join Our Impact</h6>
                            <p class="cta-text">Be part of the change. Your contribution creates lasting impact in communities worldwide.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-auto">
                <a href="{% url 'charity:donate_now' %}" class="th-btn style4">Donate Now<i class="fas fa-arrow-up-right ms-2"></i></a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'assets/js/impact-animations.js' %}"></script>
{% endblock %}
