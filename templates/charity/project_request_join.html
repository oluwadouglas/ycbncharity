{% extends 'charity/base.html' %}
{% load static %}

{% block title %}Request to Join {{ project.title }} | YCBF{% endblock %}

{% block content %}
<!-- Page Header Start -->
<div class="container-fluid page-header mb-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="container text-center">
        <h1 class="display-4 text-white animated slideInDown mb-4">Join Project</h1>
        <nav aria-label="breadcrumb animated slideInDown">
            <ol class="breadcrumb justify-content-center mb-0">
                <li class="breadcrumb-item"><a class="text-white" href="{% url 'charity:home' %}">Home</a></li>
                <li class="breadcrumb-item"><a class="text-white" href="{% url 'charity:projects' %}">Projects</a></li>
                <li class="breadcrumb-item"><a class="text-white" href="{% url 'charity:project_detail' project.id %}">{{ project.title|truncatechars:20 }}</a></li>
                <li class="breadcrumb-item text-primary active" aria-current="page">Join Project</li>
            </ol>
        </nav>
    </div>
</div>
<!-- Page Header End -->

<!-- Join Project Form Start -->
<div class="container-xxl py-5">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                <div class="d-flex flex-column">
                    <h2 class="mb-4">Request to Join: {{ project.title }}</h2>
                    <p class="mb-4">
                        Please fill out the form to request to join this project. Your request will be reviewed by the project administrators.
                        You will be notified once your request is approved or rejected.
                    </p>
                    <div class="d-flex pt-2">
                        <div class="ms-3">
                            <h5>What happens next?</h5>
                            <p class="mb-1">1. Submit your request with your role and a message</p>
                            <p class="mb-1">2. Project admins will review your request</p>
                            <p class="mb-1">3. You'll receive a notification with the decision</p>
                            <p class="mb-0">4. If approved, you'll gain access to project resources</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s">
                <div class="bg-light rounded p-5">
                    <h3 class="mb-4">Join Request Form</h3>
                    <form method="post" action="{% url 'charity:request_join_project' project.id %}">
                        {% csrf_token %}
                        
                        <div class="row g-3">
                            <div class="col-12">
                                <div class="form-floating">
                                    <select class="form-select border-0" id="role" name="role" style="height: 55px;" required>
                                        <option value="">Select your role</option>
                                        {% for value, label in role_choices.items %}
                                            <option value="{{ value }}" {% if value == 'student' %}selected{% endif %}>{{ label }}</option>
                                        {% endfor %}
                                    </select>
                                    <label for="role">Your Role</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-floating">
                                    <textarea class="form-control border-0" placeholder="Leave a message here" id="message" name="message" style="height: 150px"></textarea>
                                    <label for="message">Why do you want to join this project? (Optional)</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <button class="btn btn-primary w-100 py-3" type="submit">Submit Request</button>
                            </div>
                        </div>
                    </form>
                    <hr class="my-4">
                    <div class="text-center">
                        <a href="{% url 'charity:project_detail' project.id %}" class="btn btn-outline-secondary">
                            <i class="fa fa-arrow-left me-2"></i> Back to Project
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Join Project Form End -->
{% endblock %}

{% block extra_css %}
<style>
    .form-control:focus, .form-select:focus {
        border-color: #1A685B;
        box-shadow: 0 0 0 0.25rem rgba(26, 104, 91, 0.25);
    }
    .btn-primary {
        background-color: #1A685B;
        border-color: #145143;
    }
    .btn-primary:hover {
        background-color: #145143;
        border-color: #0e3a30;
    }
</style>
{% endblock %}
